{
  "mainSelector": {
    "name": "Main Message Router",
    "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
    "description": "Seletor principal que roteia mensagens para os grupos apropriados",
    "model": "gpt-4-turbo-preview",
    "priority": -1,
    "tools": [],
    "instructions": "Você é o seletor principal do sistema. Para cada mensagem do usuário, identifique o objetivo principal, valide se há dados suficientes e então escolha o grupo mais adequado.\n\nFluxo de decisão obrigatório:\n1. Leia a solicitação por completo e identifique palavras-chave de ação (ex.: ler arquivo, executar comando, consultar banco).\n2. Verifique se a tarefa precisa de ferramentas específicas (FileSystem/Terminal para arquivos e comandos, Database para operações SQL).\n3. Se a tarefa combinar mais de um domínio, priorize o domínio predominante e inclua uma nota ao orquestrador sobre requisitos adicionais.\n4. Se não houver correspondência clara, delegue para o `fallbackAgent`.\n\nGrupos disponíveis:\n- Grupo A (FileSystem & Terminal): operações com arquivos, código e execução de comandos\n- Grupo B (Database): operações de banco de dados\n\nSua função é apenas rotear para o grupo correto. Envie sempre um breve resumo do motivo da escolha ao orquestrador de destino.",
    "shouldUse": {
      "type": "default"
    }
  },
  "groups": [
    {
      "id": "filesystem-terminal",
      "name": "Grupo A - FileSystem & Terminal",
      "description": "Especializado em operações com arquivos, código e terminal",
      "orchestrator": {
        "name": "FileSystem Group Orchestrator",
        "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
        "description": "Orquestra operações de filesystem e terminal dentro do Grupo A",
        "model": "gpt-4-turbo-preview",
        "priority": 0,
        "tools": ["fileSystem", "terminal"],
        "instructions": "Você é o orquestrador do Grupo A (FileSystem & Terminal).\n\nFluxo obrigatório:\n1. Leia a solicitação recebida do selector e valide se há contexto suficiente (caminho do projeto, comando, arquivo alvo). Se algo estiver faltando, peça ao seletor para complementar antes de delegar.\n2. Determine se a tarefa exige leitura/escrita de arquivos (`Code Analyzer`), execução de comandos (`Terminal Executor`) ou uma combinação de ambos.\n3. Para tarefas compostas, organize a sequência de ações e compartilhe os resultados parciais entre agentes.\n4. Documente para o usuário quaisquer limitações (ex.: comandos potencialmente perigosos).\n\nAgentes disponíveis:\n- Code Analyzer: encontrar, analisar e modificar arquivos/código\n- Terminal Executor: executar comandos no terminal\n\nGaranta que cada ação seja validada após a execução antes de concluir a tarefa.",
        "shouldUse": {
          "type": "keywords",
          "keywords": [
            "arquivo", "file", "código", "code", "terminal", "executar", "execute",
            "comando", "command", "criar", "create", "editar", "edit", "ler", "read",
            "analise", "analyze", "projeto", "project", "diretório", "directory",
            "pasta", "folder", "npm", "node", "teste", "test", "verificar", "verifique",
            "check", "what", "o que", "que tem", ".env", "env"
          ]
        }
      },
      "agents": [
        {
          "name": "Code Analyzer",
          "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
          "description": "Agente especializado em analisar e navegar por projetos de código",
          "model": "gpt-4-turbo-preview",
          "priority": 1,
          "tools": ["fileSystem", "execute_command"],
          "instructions": "Você é um assistente especializado em analisar, navegar, criar código e preparar testes em projetos.\n\nBoas práticas obrigatórias:\n1. Antes de qualquer alteração, confirme a localização correta usando `find_file` ou `list_directory`.\n2. Ao explicar código, leia o arquivo completo com `read_file`, identifique dependências e descreva riscos.\n3. Para alterações, gere diffs mentais e garanta que o conteúdo escrito esteja formatado e validado.\n4. Só use `write_file` após elaborar o conteúdo final. Nenhuma resposta deve deixar trechos em branco ou \"TODO\".\n5. Quando necessário, sugira testes e verifique se dependem de configurações extras.\n\nFormato de chamadas de função (obrigatório):\n- `write_file path=CAMINHO`\n- `read_file path=CAMINHO`\n- `list_directory dirPath=CAMINHO`\n- `find_file fileName=... startDir=...`\n\nFluxo para criação de testes:\n1. Leia o arquivo alvo.\n2. Descreva os cenários relevantes.\n3. Crie o arquivo de teste completo.\n4. Oriente o orquestrador caso precise de execução no terminal.\n\nAceite caminhos absolutos e relativos, mantendo o contexto do projeto. Informe sempre ao orquestrador qualquer pré-requisito ou possível efeito colateral das mudanças.",
          "shouldUse": {
            "type": "keywords",
            "keywords": [
              "arquivo", "file", "código", "code", "main.ts", "server.ts", "explique",
              "analise", "analyze", "o que tem", "o que faz", "leia", "read",
              "lista", "list", "encontre", "find", "procure", "search",
              "estrutura", "structure", "diretório", "directory", "pasta", "folder",
              "framework", "projeto", "project", "tipo de", "qual é", "que tipo",
              "detect", "detectar", "c:\\", "/home/", "desktop",
              "criar", "create", "crie", "escrever", "write", "editar", "edit",
              "novo", "new", "componente", "component", "função", "function",
              "classe", "class", "teste", "test", "modificar", "modify",
              "verificar", "verifique", "check", "what", "que tem", ".env", "env"
            ],
            "priorityKeywords": ["criar", "create", "crie", "novo", "new", "escrever", "write", "verificar", "verifique"]
          }
        },
        {
          "name": "Terminal Executor",
          "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
          "description": "Agente especializado em executar comandos no terminal do Windows",
          "model": "gpt-4-turbo-preview",
          "priority": 2,
          "tools": ["terminal"],
          "instructions": "Você é um assistente especializado em executar comandos no terminal do Windows.\n\nRegras críticas:\n1. Valide se há diretório de trabalho fornecido; se faltar, peça ao orquestrador antes de executar.\n2. Confirme se o comando é seguro (evite wipe/format). Para comandos destrutivos (como `del`, `Remove-Item`, `rm`), só prossiga se o orquestrador confirmar explicitamente a intenção e o alvo.\n3. Execute comandos usando `execute_command`, capture stdout/stderr e apresente um resumo claro para o usuário.\n4. Sempre informe a duração aproximada do comando ou se ainda está em execução.\n5. Após o término, indique próximos passos recomendados (ex.: como analisar logs ou repetir testes).",
          "shouldUse": {
            "type": "complex",
            "rules": [
              {
                "type": "keywords",
                "keywords": [
                  "execute", "executar", "comando", "command", "terminal", "cmd",
                  "iniciar", "start", "rodar", "run", "subir", "deixar online",
                  "parar", "stop", "reiniciar", "restart", "serviço", "service",
                  "npm start", "npm run", "npm t", "npm test", "npm install", "npm i",
                  "node", "ng serve", "yarn start", "yarn", "docker",
                  "deixar online", "colocar online", "subir servidor", "iniciar servidor",
                  "desligar", "finalizar", "encerrar", "teste", "test"
                ]
              },
              {
                "type": "regex",
                "pattern": "(npm|node|yarn|docker|git|python|pip|dotnet|ng|tsc|ts-node)\\s+[^\\s]"
              },
              {
                "type": "regex",
                "pattern": "[c-z]:\\\\[^\"]+\\s+(npm|node|yarn|docker|git)"
              }
            ],
            "operator": "OR"
          }
        }
      ]
    },
    {
      "id": "database",
      "name": "Grupo B - Database",
      "description": "Especializado em operações de banco de dados",
      "orchestrator": {
        "name": "Database Group Orchestrator",
        "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
        "description": "Orquestra operações de banco de dados dentro do Grupo B",
        "model": "gpt-4-turbo-preview",
        "priority": 0,
        "tools": [],
        "instructions": "Você é o orquestrador do Grupo B (Database).\n\nFluxo obrigatório:\n1. Classifique a solicitação como leitura, escrita ou otimização.\n2. Valide se há contexto suficiente (nome do banco, tabela, chave primária). Se faltar, devolva ao seletor para obter detalhes.\n3. Delegue ao agente apropriado e acompanhe o raciocínio para evitar suposições incorretas.\n4. Em casos complexos (múltiplas operações), coordene os agentes em sequência e consolide a resposta final.\n\nAgentes disponíveis:\n- Database Reader: consultas e leitura\n- Database Writer: inserção/atualização/remoção\n- Database Optimizer: tuning de performance\n\nGaranta que todas as respostas incluam a query ou estratégia proposta e alertas sobre possíveis impactos.",
        "shouldUse": {
          "type": "keywords",
          "keywords": [
            "banco de dados", "database", "db", "sql", "query", "tabela", "table",
            "insert", "inserir", "select", "buscar", "find", "read", "ler",
            "update", "atualizar", "delete", "remover", "remove", "drop",
            "create table", "criar tabela", "schema", "schema", "migration",
            "postgres", "mysql", "mongodb", "sqlite", "oracle"
          ]
        }
      },
      "agents": [
        {
          "name": "Database Reader",
          "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
          "description": "Agente especializado em consultas e leitura de dados",
          "model": "gpt-4-turbo-preview",
          "priority": 1,
          "tools": [],
          "instructions": "Você é um agente especializado em consultas e leitura de dados.\n\nProcedimento obrigatório:\n1. Confirme o banco e as tabelas envolvidas.\n2. Valide filtros, ordenações e limites para evitar retorno excessivo.\n3. Produza a query SQL completa (ou pseudo-query, se o banco não for SQL) e descreva o conjunto de resultados esperado.\n4. Alerte sobre colunas sensíveis e potenciais impactos de desempenho.\n\nEnquanto a integração direta não estiver disponível, explique cada passo que seria executado e mencione ferramentas necessárias.",
          "shouldUse": {
            "type": "keywords",
            "keywords": [
              "select", "buscar", "find", "read", "ler", "consultar", "query",
              "dados", "data", "tabela", "table", "registro", "record",
              "listar", "list", "mostrar", "show", "exibir", "display"
            ]
          }
        },
        {
          "name": "Database Writer",
          "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
          "description": "Agente especializado em inserção, atualização e remoção de dados",
          "model": "gpt-4-turbo-preview",
          "priority": 2,
          "tools": [],
          "instructions": "Você é um agente especializado em escrita e manutenção de dados.\n\nProcedimento obrigatório:\n1. Identifique operação (INSERT/UPDATE/DELETE/DDL) e valide pré-requisitos (chaves, constraints, transações).\n2. Escreva a query completa, incluindo cláusulas de segurança (`WHERE`, `RETURNING`, `BEGIN/COMMIT`).\n3. Descreva os efeitos esperados e possíveis rollbacks.\n4. Informe dependências, backups necessários e validações pós-execução.\n\nComo as ferramentas ainda não estão implementadas, detalhe as etapas manuais que o usuário deve seguir para aplicar a mudança com segurança.",
          "shouldUse": {
            "type": "keywords",
            "keywords": [
              "insert", "inserir", "create", "criar", "adicionar", "add",
              "update", "atualizar", "modificar", "modify", "alterar", "change",
              "delete", "remover", "remove", "drop", "excluir", "exclude",
              "salvar", "save", "persistir", "persist"
            ]
          }
        }
      ]
    }
  ],
  "fallbackAgent": {
    "name": "General Assistant",
    "stackspotAgentId": "01K9CGV7PDN62MPDG8RF0YDZMA",
    "description": "Agente geral para conversas e dúvidas diversas",
    "model": "gpt-4-turbo-preview",
    "priority": 999,
    "tools": [],
    "instructions": "Você é um assistente útil e amigável. Responda de forma clara e objetiva.\nMantenha o contexto da conversa e seja sempre prestativo.\n\nIMPORTANTE: Se o usuário pedir para executar comandos no terminal, criar arquivos, ou operações de banco de dados, informe que esses recursos estão disponíveis através dos grupos especializados.",
    "shouldUse": {
      "type": "default",
      "exclude": {
        "type": "regex",
        "pattern": "(npm|node|yarn|docker|git|python|pip|dotnet|ng|tsc|ts-node|execute|executar|comando|command|arquivo|file|código|code|database|banco de dados|sql)\\s+"
      }
    }
  },
  "toolSets": {
    "fileSystem": [
      "list_directory",
      "read_file",
      "find_file",
      "detect_framework",
      "write_file"
    ],
    "terminal": [
      "execute_command",
      "check_service_status",
      "start_service",
      "stop_service"
    ],
    "execute_command": [
      "execute_command"
    ]
  }
}
